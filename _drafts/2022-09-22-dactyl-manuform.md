---
layout: post
title: 'I built a weird keyboard'
date: 2023-06-26 21:00:00 -0300
image: /assets/img/dactyl-manuform/half_rainbow.jpg
---

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/half_rainbow.jpg' | relative_url }}" alt="A picture of half a Dactyl Manuform keyboard" />
</figure>
<br>I spent most of my free time over the last 10 months building this bizarre keyboard from scratch. It's a [Dactyl Manuform](https://github.com/abstracthat/dactyl-manuform) - a split keyboard with a highly sculpted design that is somehow simulataneously the ugliest and most eye-catching object I've ever seen.

The goal of this keyboard design is to place keys exactly along each finger's natural axis of motion. The consequences of this approach are downward-sloping (A.K.A "tented") rows to match the natural angle of the wrists, a deeper middle finger column to compensate for this finger's relative length, an offset pinky column to minimize stretching, and a thumb cluster with multiple keys to take advantage of its opposable nature.

There's a reason most keyboards don't look like this. It's difficult to mass-produce curved keyboards since they can't use the stiff, flat [PCBs](https://en.wikipedia.org/wiki/Printed_circuit_board) that most keyboards use to wire the keys to the microcontroller. Every Dactyl Manuform is a unique piece of art, painstakingly hand-wired by a human being. Here's how I built mine:

## Build log

The first step was to design and 3D print the case. There are a number of Dactyl Manuform model generators out there; I ended up using [this one](https://github.com/ibnuda/dactyl-keyboard/tree/refaktor) since it had a few extra features I wanted (e.g. wide pinky keys). Some things I was looking for in my design:

- A key layout similar to the [ErgoDox EZ](https://ergodox-ez.com/) keyboards I already own
- An aggressive tent angle (I went with π/8 = 22.5°)
- [Hot-swap](https://en.wikipedia.org/wiki/Hot_swapping#Keyboards) sockets

I gave up on the hot-swap sockets after failing to coax the generator script to produce valid hot-swap socket holders. I'm glad I did - in the end I don't think they would have worked anyway.

Once I had a model that looked good on the screen, I printed a draft version to see it in real life.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/draft.jpg' | relative_url }}" alt="A draft print of the right half" />
    <figcaption>Printed with a .8mm nozzle, .32mm layer height, and lightning infill</figcaption>
</figure>
<br>

Overall, I was really happy with this first draft. I only made a few tweaks to the model before printing the real thing:

1. I enabled the "external microcontroller" option, which let me kick the can on deciding which microcontroller and connection types to use
1. I added my own screw holes; the holes generated by the script were awkwardly placed

To mount the base plates to the body of the keyboard, I used [these heat set inserts](https://a.co/d/6wMZmwo). It's a neat system; the threaded inserts are melted into the 3D print using a soldering gun, producing threaded screw holes much stronger and smaller than anything that would be possible using only 3D printing.

To determine the ideal hole size for these inserts, I made a test print.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/insert_tester.jpg' | relative_url }}" alt="A photo of a print for determining the correct insert tolerance" />
    <figcaption>A test print with insert holes ranging from 3.8mm to 4.2mm in diameter</figcaption>
</figure>
<br>

I'm glad I tested this; _all_ of the hole options were too small! A second print with bigger holes was more successful.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/insert_tester_after.jpg' | relative_url }}" alt="A photo of another insert hole test print; this one includes installed screws" />
    <figcaption>A second test print with insert holes ranging from 4.2mm to 4.6mm in diameter. I decided to go with 4.5mm</figcaption>
</figure>
<br>

With this last detail resolved, I began printing the real halves. I used my favorite material - wood PLA - which looks (and even smells!) quite similar to real wood, once properly post-processed.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/cura.jpg' | relative_url }}" alt="A screenshot of the final STL being sliced in Cura" />
    <figcaption>The final STL file being sliced in Cura. 24 hours per half!</figcaption>
</figure>
<br>

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/on_print_bed.jpg' | relative_url }}" alt="A picture of the left half of the keyboard on the 3D printer bed" />
    <figcaption>The left half, fresh off the printer</figcaption>
</figure>
<br>

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/printed_no_sanding.jpg' | relative_url }}" alt="A picture of both halves of the keyboard" />
    <figcaption>Both halves printed and slightly cleaned up</figcaption>
</figure>
<br>

I melted the inserts into the holes, which was nerve-wracking; one bad insert would have likely ruined the whole print. It was awkward to try and hold the keyboard _and_ the insert in place while pressing the insert into the plastic with the soldering gun. Somehow I managed to install all ten without issue!

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/insert_installed.jpg' | relative_url }}" alt="A picture of an installed heat-set insert" />
    <figcaption>An installed heat-set insert</figcaption>
</figure>
<br>

I ordered the transparent acrylic base plates from [ponoko.com](https://www.ponoko.com/) and was quite happy with the result.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/acrylic_plate.jpg' | relative_url }}" alt="The bottom plate of the keyboard, made from acrylic" />
    <figcaption>Acrylic base plate from <a href="https://www.ponoko.com/">ponoko.com</a></figcaption>
</figure>
<br>

Next up was post-processing. I sanded each half with 80-grit sandpaper, which was a _ton_ of work - there are a lot of nooks and crannies that make this a tedious job.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/sanded_side.jpg' | relative_url }}" alt="A picture of both keyboard halves, sanded" />
    <figcaption>Both halves, sanded</figcaption>
</figure>
<br>

In order to sand the inside of the key holes, I printed a little attachment that I could wrap with sandpaper and fit on my screwdriver.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/screw_driver.jpg' | relative_url }}" alt="A screwdriver with a 3D-printed accessory installed" />
    <figcaption>My custom SuperSander™ (patent pending)</figcaption>
</figure>
<br>

Normally this would be an unnecessary step - no one sees the inside of the key holes - but the fit was a _bit_ too tight; most of the holes required some sanding before the switch would fit properly. (This is why I'm glad I didn't bother with hot-swap sockets - the fit is so tight, I'd never be able to get the switches out anyway.)

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/sanded_top.jpg' | relative_url }}" alt="Another picture of both keyboard halves, sanded" />
    <figcaption>Another shot, because sanding these took too much time not to show off</figcaption>
</figure>
<br>

The next step was to stain and clear coat the prints. I used this [gel stain](https://www.homedepot.ca/product/1000844900) and [glossy polyurethane](https://a.co/d/do2gUQm) to give the prints a rich, polished wood color.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/finish_complete_one_side.jpg' | relative_url }}" alt="A picture of a keyboard half, finished with stain and polyurethane" />
    <figcaption>The finished product</figcaption>
</figure>
<br>

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/finish_complete_one_side_closeup.jpg' | relative_url }}" alt="Another picture of a keyboard half from a different angle, finished with stain and polyurethane" />
    <figcaption>Some nice faux woodgrain</figcaption>
</figure>
<br>

This was a time consuming step, as each half required three coats of stain (minimum 24 hours to dry per coat) and at least 3 coats of polyurethane (a few hours to dry per coat). I did this in the dead of winter which made drying these in the outdoors challenging (a space heater may have been involved).

The hard work paid off, though - I'm really happy with how these look! The layer lines even give the illusion of a wood grain.

The next decision was which key switches to use. I'm a clicky switch guy; the noisier the better. I bought a Kailh switch tester so I could make an informed decision and decided on Kailh Box Whites.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/switch_tester.jpg' | relative_url }}" alt="Two keyboard switch testers" />
    <figcaption>Regular and low-profile Kailh switch testers. Not pictured: Gateron and Boba testers</figcaption>
</figure>
<br>

Compared to other clicky switches (e.g. Cherry MX Blues), Box Whites are _extra_ clicky (they click _twice_ per key press). Perfect for working remotely! If I ever make a silent/office-friendly version of this board, I'll go with Boba U4 Silents.

At this point, I was able to set the switches and keycaps in place and get a feel for what it would be like to type on this monstrosity. I'll admit it felt about as weird as it looks.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/finish_complete_both_sides.jpg' | relative_url }}" alt="A picture of the keyboard; half has just the switches installed, and the other half has both switches and key caps installed" />
    <figcaption>Switches and keycaps (temporarily) installed</figcaption>
</figure>
<br>

There was one last detail to work out before I could begin wiring up the halves. I wanted to install a rotary encoder ("volume knob") on each half, but these don't click into a standard keyboard hole out of the box. I had to 3D print a special adapter for each.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/encoder_adapters.jpg' | relative_url }}" alt="3D-printed adapters for rotary encoders" />
    <figcaption>The end result, with chunks of glass attached to the bottoms</figcaption>
</figure>
<br>

I printed these with PETG and learned the hard way to _always_ use glue stick when printing with PETG. The adapters adhesed to the bed so strongly they took chunks out of my glass bed when I finally pried them off. I was able to salvage the adapters with some sanding, but the printer bed was unfortunately beyond repair.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/broken_bed.jpg' | relative_url }}" alt="A picture of the 3D printer bed with chips in it from the overly-adhesive PETG print" />
    <figcaption>😭</figcaption>
</figure>
<br>

Despite their rather violent effects on my printer, the adapters did their job quite nicely!

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/encoders_installed.jpg' | relative_url }}" alt="Two pictures of rotary encoders; one without a cap and one with a cap" />
    <figcaption>Rotary encoder with and without the cap</figcaption>
</figure>
<br>

Finally, it was time to start wiring it up! First, I wrapped diodes around one pin on each switch.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/diodes_installed.jpg' | relative_url }}" alt="A keyboard half with diodes bent around one pin of the switch" />
    <figcaption>Diodes wrapped</figcaption>
</figure>
<br>

I soldered the diodes into place and snipped the extra leg.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/diodes_soldered.jpg' | relative_url }}" alt="A keyboard half with diodes soldered to one pin of the switch" />
    <figcaption>Diodes soldered and snipped</figcaption>
</figure>
<br>

I soldered the remaining diode legs together to form the rows of the [key matrix](https://en.wikipedia.org/wiki/Keyboard_matrix_circuit).

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/diodes_soldered_together.jpg' | relative_url }}" alt="A keyboard half with diodes soldered together to form rows of the keyboard matrix" />
    <figcaption>Diode legs soldered together into rows</figcaption>
</figure>
<br>

I used small, individual pieces of insulated wire to form the columns.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/columns_soldered.jpg' | relative_url }}" alt="A keyboard half with wires soldered to the switches to form columns of the keyboard matrix" />
    <figcaption>Don't look too closely; I'm really bad at soldering</figcaption>
</figure>
<br>

I installed [DuPont connectors](https://en.wikipedia.org/wiki/Jump_wire) so I didn't have to solder directly to the microcontroller. This saved me a _lot_ of headache since it took quite a bit of trial and error to get all pins in the right spot.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/dupont_connectors_attached.jpg' | relative_url }}" alt="A keyboard half with DuPont connectors installed to each row and column of the keyboard matrix" />
    <figcaption>DuPont connectors installed</figcaption>
</figure>
<br>

I flashed a basic [QMK](https://qmk.fm/) firmware to the microcontroller and had the incredibly satisfying experience of seeing a letter appear on the screen when I pressed a key. I also got the LED strip working!

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/it_lives.jpg' | relative_url }}" alt="A keyboard half with a LED strip lit in rainbow colors" />
    <figcaption>IT LIVES!!</figcaption>
</figure>
<br>

I was getting _really_ close at this point. I designed a custom holder for the microcontroller since the one that was supposed to be compatible with my case didn't fit for some reason.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/holder.jpg' | relative_url }}" alt="A 3D printed holder for the microcontroller" />
    <figcaption>Custom-designed microcontroller holder</figcaption>
</figure>
<br>

I spliced some wires together since a few of the microcontroller pins had to be shared by more than one connection.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/spaghetti.jpg' | relative_url }}" alt="A mess of wires soldered together" />
    <figcaption>I'm frankly shocked this thing works</figcaption>
</figure>
<br>

After assembling all the pieces, a bit of software configuration, and a lot of trial and error... I had a working keyboard!

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/desk.jpg' | relative_url }}" alt="A picture of the finished keyboard on a desk" />
    <figcaption>Finally. Done.</figcaption>
</figure>
<br>

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/bottom_and_side.jpg' | relative_url }}" alt="A picture of the finished keyboard, with one half showing the bottom and one half showing the side" />
    <figcaption>This was way too much work.</figcaption>
</figure>
<br>

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/pink.jpg' | relative_url }}" alt="Another picture of the finished keyboard, with pink underglow" />
    <figcaption>Never again. Probably.</figcaption>
</figure>
<br>

<figure>
    <video controls width="500">
        <source src="{{ 'assets/img/dactyl-manuform/alert.mp4' | relative_url }}" />
    </video>
    <figcaption>ALERT</figcaption>
</figure>
<br>

## How does it feel?

Weird, but good! I've only been typing on it for a few work days, so my muscle memory hasn't fully adjusted. I keep reaching for keys in the wrong places; in particular, my fingers naturally stretch too far when reaching for the bottom row. I also made a few modifications to my [QMK layout](https://gitlab.com/nfriend/qmk_firmware/-/blob/nfriend-dactyl-manuform/keyboards/handwired/dactyl_manuform/5x7/keymaps/nfriend/keymap.c) to take advantage of the more accessible thumb clusters compared to my ErgoDox EZ. I think I'll really like it once I'm used to it.

## Was it worth it?

Umm... I think so? The end result was fantastic, but it was an insane amount of work. I don't recommend this project to anyone who isn't interested in the process itself. If you're just looking for a great ergonomic keyboard, I'd recommend buying an [ErgoDox EZ](https://ergodox-ez.com/), a [Moonlander](https://www.zsa.io/moonlander/), a [Kinesis Advantage360](https://kinesis-ergo.com/shop/adv360/) or a [prebuilt Dactyl Manuform](https://ohkeycaps.com/products/built-to-order-dactyl-manuform-keyboard), all of which will cost about the same as this project (see below).

## Cost breakdown

Cost of all items, including tax and shipping.

| Description                                    | Cost (CAD)  | Link                                                                                                                                                                  |
| ---------------------------------------------- | ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Wood PLA filament for 3D printed case          | $40.44      | [amazon.ca](https://a.co/d/eUWep4w)                                                                                                                                   |
| Kailh switch tester                            | $21.46      | [aliexpress.com](https://www.aliexpress.com/item/32898546644.html)                                                                                                    |
| Kailh low-profile switch tester                | $9.68       | [aliexpress.com](https://www.aliexpress.com/item/4001204818828.html)                                                                                                  |
| Pro Micro controller (x2)                      | $44.98      | [amazon.ca](https://a.co/d/1GsSJXg)                                                                                                                                   |
| Kailh BOX White switches (x90)                 | $51.26      | [aliexpress.com](https://www.aliexpress.com/item/1005004522909300.html)                                                                                               |
| M3 heat-seated inserts (x100)                  | $12.42      | [amazon.ca](https://a.co/d/6wMZmwo)                                                                                                                                   |
| M3 screws (x100)                               | $12.02      | [amazon.ca](https://a.co/d/enX1CBA)                                                                                                                                   |
| EC11 rotary encoder (x4)                       | $15.80      | [amazon.ca](https://a.co/d/eAp729Y)                                                                                                                                   |
| LED strip (1m)                                 | $16.37      | [aliexpress.com](https://www.aliexpress.com/item/32682015405.html)                                                                                                    |
| 1N4148 Diode (x100)                            | $8.80       | [digikey.ca](https://www.digikey.ca/en/products/detail/onsemi/1N4148/458603)                                                                                          |
| Reset button (x3)                              | $10.82      | [digikey.ca](https://www.digikey.ca/en/products/detail/e-switch/PS1057ABLK/46305)                                                                                     |
| 22AWG Wire (25')                               | $7.24       | [digikey.ca](https://www.digikey.ca/en/products/detail/sparkfun-electronics/PRT-08866/6833926)                                                                        |
| TRRS jack, female (x3)                         | $12.65      | [digikey.ca](https://www.digikey.ca/en/products/detail/switchcraft-inc/35RASMT5CHNTRX/16569698)                                                                       |
| Jumper wire (x60)                              | $11.74      | [digikey.ca](https://www.digikey.ca/en/products/detail/sparkfun-electronics/PRT-12796/5993861)                                                                        |
| Soldering iron                                 | $59.87      | [homedepot.ca](https://www.homedepot.ca/product/1001649527)                                                                                                           |
| Solder                                         | $28.23      | [homedepot.ca](https://www.homedepot.ca/product/1001652943)                                                                                                           |
| Wire stripper                                  | $11.29      | [canadiantire.ca](https://www.canadiantire.ca/en/pdp/mastercraft-20-30-gauge-wire-stripper-comfort-grip-handles-high-carbon-heat-treated-steel-0584508p.html?loc=plp) |
| Acrylic base plate (x4)                        | $54.88      | [ponoko.com](https://www.ponoko.com/)                                                                                                                                 |
| Gel wood stain                                 | $19.93      | [homedepot.ca](https://www.homedepot.ca/product/1000844900)                                                                                                           |
| Glossy polyurethane                            | $27.11      | [amazon.ca](https://a.co/d/do2gUQm)                                                                                                                                   |
| Keycap set (x2)                                | $57.32      | [amazon.ca](https://www.amazon.ca/gp/product/B0B3QQ2468)                                                                                                              |
| Electrical tape                                | $5.37       | [amazon.ca](https://www.amazon.ca/dp/B001AXD0EY)                                                                                                                      |
| Rubber feet                                    | $13.55      | [amazon.ca](https://www.amazon.ca/gp/product/B08GLMTL77)                                                                                                              |
| **Only keyboard materials**                    | **$450.93** | ≈ $340 USD                                                                                                                                                            |
| **All items** (including tools, testers, etc.) | **$553.23** | ≈ $417 USD                                                                                                                                                            |

As you can see, building your own keyboard is _not_ a good way to save money&nbsp;💸

## Links/resources

- All `.stl` and `.svg` files: [https://www.thingiverse.com/thing:6099418](https://www.thingiverse.com/thing:6099418)
- A helpful Hacker News comment: [https://news.ycombinator.com/item?id=23445208](https://news.ycombinator.com/item?id=23445208)
- The generator I used to generate the keyboard case model: [https://github.com/ibnuda/dactyl-keyboard/tree/refaktor](https://github.com/ibnuda/dactyl-keyboard/tree/refaktor)
- The firmware that powers the keyboard: [https://qmk.fm/](https://qmk.fm/)
- Some helpul build logs:
  - [https://sachee.medium.com/building-my-first-keyboard-and-you-can-too-512c0f8a4c5f](https://sachee.medium.com/building-my-first-keyboard-and-you-can-too-512c0f8a4c5f)
  - [https://youtu.be/UerP5bxGL3c](https://youtu.be/UerP5bxGL3c) (and subsequent videos)
  - [https://nickgreen.info/dactyl-manuform-build-log/](https://nickgreen.info/dactyl-manuform-build-log/)
  - [https://medium.com/swlh/complete-idiot-guide-for-building-a-dactyl-manuform-keyboard-53454845b065](https://medium.com/swlh/complete-idiot-guide-for-building-a-dactyl-manuform-keyboard-53454845b065)
