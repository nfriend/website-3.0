---
layout: post
title: 'I built a weird keyboard'
date: 2022-09-22 10:30:29 -0300
image: /assets/img/dactyl-manuform/half_rarinbow.jpg
---

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/half_rainbow.jpg' | relative_url }}" alt="A picture of half a Dactyl Manuform keyboard" />
</figure>
<br>

I spent most of my free time over the last 12 months building this bizarre keyboard from scratch. It's a [Dactyl Manuform](https://github.com/abstracthat/dactyl-manuform) - a split keyboard with a highly sculpted design that is somehow simulataneously the ugliest and most eye-catching object I've ever seen.

The goal of this keyboard design is to place keys exactly along each finger's natural axis of motion. The consequences of this approach are downward-sloping (A.K.A "tented") rows to match the natural angle of the wrists, a deeper middle finger column to compensate for this finger's relative length, an offset pinky column to minimize stretching, and a thumb cluster with multiple keys to take advantage of its opposable nature.

There's a reason most keyboards don't look like this. It's difficult to mass-produce curved keyboards since they can't use the stiff, flat [PCBs](https://en.wikipedia.org/wiki/Printed_circuit_board) that most keyboards use to wire the keys to the microcontroller. Every Dactyl Manuform is a unique piece of art, painstakingly hand-wired by a human being. Here's how I built mine:

## Build log

The first step was to design and 3D print the case. There are a number of Dactyl Manuform model generators out there; I ended up using [this one](https://github.com/ibnuda/dactyl-keyboard/tree/refaktor) since it had a few extra features I wanted (e.g. wide pinky keys). Some design goals:

- A key layout similar to the [ErgoDox EZ](https://ergodox-ez.com/) keyboards I already own
- An aggressive tent angle (I went with Ï€/8)
- [Hot-swap](https://en.wikipedia.org/wiki/Hot_swapping#Keyboards) sockets

I gave up on the hot-swap sockets after failing to coax the generator script to produce valid hot-swap socket holders. I'm glad I did - in the end I don't think they would have worked anyway.

Once I had a model I was happy with, I printed a draft version to get a feel for it!

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/draft.jpg' | relative_url }}" alt="A draft print of the right half" />
    <figcaption>Printed with a .8mm nozzle, .32mm layer height, and lightning infill</figcaption>
</figure>
<br>

Overall, I was really happy with this first draft. I only made a few tweaks to the model before printing the real thing:

- I enabled the "external microcontroller" option, which let me kick the can on deciding which microcontroller and connection types to use
- I added my own screw holes; the holes generated by the script were awkwardly placed

To mount the base plates to the body of the keyboard, I used [these heat set](https://a.co/d/6wMZmwo) inserts. It's a neat system; the threaded inserts are melted into the 3D print using a soldering gun, producing threaded screw holes much stronger and smaller than anything that would be possible using only 3D printing.

To determine the ideal hole size for these inserts, I made this test print:

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/insert_tester.jpg' | relative_url }}" alt="A photo of a print for determining the correct insert tolerance" />
    <figcaption>A test print with insert holes ranging from 3.8mm to 4.2mm in diameter</figcaption>
</figure>
<br>

I'm glad I tested this; they were _all_ too small. A second print with bigger holes was more successful:

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/insert_tester_after.jpg' | relative_url }}" alt="A photo of another insert hole test print; this one includes installed screws" />
    <figcaption>A second test print with insert holes ranging from 4.2mm to 4.6mm in diameter</figcaption>
</figure>
<br>

I decided to go with 4.5mm.

With this last detail resolved, I began printing the real halves. I used my favorite material - wood PLA - which looks (and even smells) quite similar to real wood, once properly post-processed.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/cura.jpg' | relative_url }}" alt="A screenshot of the final STL being sliced in Cura" />
    <figcaption>The final STL file being sliced in Cura</figcaption>
</figure>
<br>

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/on_print_bed.jpg' | relative_url }}" alt="A picture of the left half of the keyboard on the 3D printer bed" />
    <figcaption>The left half, fresh off the printer</figcaption>
</figure>
<br>

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/printed_no_sanding.jpg' | relative_url }}" alt="A picture of both halves of the keyboard" />
    <figcaption>Both halves completed</figcaption>
</figure>
<br>

I melted the inserts into the holes, which was nerve-wracking. It was awkward to try and hold the keyboard _and_ the insert in place while pressing the insert into the plastic with the soldering gun.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/insert_installed.jpg' | relative_url }}" alt="A picture of an installed heat-set insert" />
    <figcaption>An installed heat-set insert. Each half has five.</figcaption>
</figure>
<br>

Next up was post-processing. I sanded each half with 80-grit sandpaper, which was a _ton_ of work - there are a lot of nooks and crannies that make this tedious:

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/sanded_side.jpg' | relative_url }}" alt="A picture of both keyboard halves, sanded" />
    <figcaption>Both halves, sanded</figcaption>
</figure>
<br>

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/sanded_top.jpg' | relative_url }}" alt="Another picture of both keyboard halves, sanded" />
    <figcaption>Another shot, because sanding these took too much time not to show off</figcaption>
</figure>
<br>

The next step was to stain and clear coat the prints. I used this [gel stain](https://www.homedepot.ca/product/1000844900) and [glossy polyurethane](https://a.co/d/do2gUQm) to give the prints a rich, polished wood color.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/finish_complete_one_side.jpg' | relative_url }}" alt="A picture of a keyboard half, finished with stain and polyurethane" />
    <figcaption>The finished product</figcaption>
</figure>
<br>

This was a time consuming step, as each half required three coats of stain (minimum 24 hours to dry per coat) and at least 3 coats of polyurethane (a few hours to dry per coat).

At this point, I was able to set the switches and keycaps in place and get a feel for what it would be like to type on this monstrosity.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/finish_complete_both_sides.jpg' | relative_url }}" alt="A picture of the keyboard; half has just the switches installed, and the other half has both switches and key caps installed" />
    <figcaption>Switches and keycaps (temporarily) installed</figcaption>
</figure>
<br>

I had settled on Kailh box white switches after trying a bunch using this handy tester:

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/switch_tester.jpg' | relative_url }}" alt="Two keyboard switch testers" />
    <figcaption>Regular and low-profile Kailh switch testers. I also ended up buying a Gateron and a Boba tester</figcaption>
</figure>
<br>

These keys are _extra_ clicky. Perfect for working remotely!

There was one last detail to work out before I could begin wiring up the boards. I wanted to install a rotary encoder (A.K.A "volume knob") on each half, but these aren't compatible with keyboard holes out of the box. I had to 3D print a special adapter for each.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/encoder_adapters.jpg' | relative_url }}" alt="3D-printed adapters for rotary encoders" />
    <figcaption>The end result with chunks of glass attached to the bottoms</figcaption>
</figure>
<br>

I printed these with PETG and learned the hard way to _always_ use glue stick when printing with PETG. The adapters adhesed to the bed so strongly they took chunks out of my glass bed when I finally pried them off. I was able to salvage the adapters with some sanding, but the printer bed was unfortunately beyond repair.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/broken_bed.jpg' | relative_url }}" alt="A picture of the 3D printer bed with chips in it from the overly-adhesive PETG print" />
    <figcaption>ðŸ˜­</figcaption>
</figure>
<br>

Despite the rather violent effect on my printer, the adapters did their job quite nicely!

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/encoders_installed.jpg' | relative_url }}" alt="Two pictures of rotary encoders; one without a cap and one with a cap" />
    <figcaption>Rotary encoder with and without the cap</figcaption>
</figure>
<br>

Finally, it was time to start wiring it up! First, I wrapped diodes around each pin.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/diodes_installed.jpg' | relative_url }}" alt="A keyboard half with diodes bent around one pin of the switch" />
    <figcaption>Diodes wrapped</figcaption>
</figure>
<br>

I soldered the diodes into place and snipped the extra length.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/diodes_soldered.jpg' | relative_url }}" alt="A keyboard half with diodes soldered to one pin of the switch" />
    <figcaption>Diodes snipped and soldered</figcaption>
</figure>
<br>

I soldered the remaining diode legs together to form the rows of the matrix.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/diodes_soldered_together.jpg' | relative_url }}" alt="A keyboard half with diodes soldered together to form rows of the keyboard matrix" />
    <figcaption>Diode legs soldered together</figcaption>
</figure>
<br>

The columns were wired used small, individual pieces of insulated wire.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/columns_soldered.jpg' | relative_url }}" alt="A keyboard half with wires soldered to the switches to form columns of the keyboard matrix" />
    <figcaption>Rows wired</figcaption>
</figure>
<br>

I installed [DuPont wires](https://en.wikipedia.org/wiki/Jump_wire) to save me from needing to solder the wires directly to the microcontroller.

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/dupont_connectors_attached.jpg' | relative_url }}" alt="A keyboard half with DuPont connectors installed to each row and column of the keyboard matrix" />
    <figcaption>DuPont wires installed</figcaption>
</figure>
<br>

I flashed a basic [QMK](https://qmk.fm/) firmware to the microcontroller and gave it a shot. After some trial and error, I had the incredibly satisfying experience of seeing a letter appear on the screen when I pushed a button. I also got an LED strip working!

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/it_lives.jpg' | relative_url }}" alt="A keyboard half with a LED strip lit in rainbow colors" />
    <figcaption>IT LIVES!!</figcaption>
</figure>
<br>

I was getting _really_ close at this point. I designed a holder for the microcontroller since the "normal" one didn't fit my keyboard for some reason:

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/holder.jpg' | relative_url }}" alt="A 3D printed holder for the microcontroller" />
    <figcaption>Custom-designed microcontroller holder</figcaption>
</figure>
<br>

I had to splice some wires together since some of the microcontroller pins had to be shared by more than one connection:

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/spaghetti.jpg' | relative_url }}" alt="A mess of wires soldered together" />
    <figcaption>I'm frankly shocked this thing works</figcaption>
</figure>
<br>

After assembling all the pieces, a bit of software configuration, and a lot of trial and error... I had a working keyboard!

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/desk.jpg' | relative_url }}" alt="A picture of the finished keyboard on a desk" />
    <figcaption>Finally. Done.</figcaption>
</figure>
<br>

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/bottom_and_side.jpg' | relative_url }}" alt="A picture of the finished keyboard, with one half showing the bottom and one half showing the side" />
    <figcaption>This was way too much work.</figcaption>
</figure>
<br>

<figure>
    <img loading="lazy" src="{{ 'assets/img/dactyl-manuform/pink.jpg' | relative_url }}" alt="Another picture of the finished keyboard, with pink underglow" />
    <figcaption>Never again. Probably.</figcaption>
</figure>
<br>

<figure>
    <video controls width="500">
        <source src="{{ 'assets/img/dactyl-manuform/alert.mp4' | relative_url }}" />
    </video>
    <figcaption>ALERT</figcaption>
</figure>
<br>

### Cost breakdown

Cost of all items, including tax and shipping.

| Description                                    | Cost (CAD)  | Link                                                                                                                                                                  |
| ---------------------------------------------- | ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Wood PLA filament for 3D printed case          | $40.44      | [amazon.ca](https://a.co/d/eUWep4w)                                                                                                                                   |
| Kailh switch tester                            | $21.46      | [aliexpress.com](https://www.aliexpress.com/item/32898546644.html)                                                                                                    |
| Kailh low-profile switch tester                | $9.68       | [aliexpress.com](https://www.aliexpress.com/item/4001204818828.html)                                                                                                  |
| Pro Micro controller (x2)                      | $44.98      | [amazon.ca](https://a.co/d/1GsSJXg)                                                                                                                                   |
| Kailh BOX White switches (x90)                 | $51.26      | [aliexpress.com](https://www.aliexpress.com/item/1005004522909300.html)                                                                                               |
| Kailh hot-swap sockets (x100)                  | $17.89      | [aliexpress.com](https://www.aliexpress.com/item/4001051840976.html)                                                                                                  |
| M3 heat-seated inserts (x100)                  | $12.42      | [amazon.ca](https://a.co/d/6wMZmwo)                                                                                                                                   |
| M3 screws (x100)                               | $12.02      | [amazon.ca](https://a.co/d/enX1CBA)                                                                                                                                   |
| EC11 rotary encoder (x4)                       | $15.80      | [amazon.ca](https://a.co/d/eAp729Y)                                                                                                                                   |
| LED strip (1m)                                 | $16.37      | [aliexpress.com](https://www.aliexpress.com/item/32682015405.html)                                                                                                    |
| 1N4148 Diode (x100)                            | $8.80       | [digikey.ca](https://www.digikey.ca/en/products/detail/onsemi/1N4148/458603)                                                                                          |
| Reset button (x3)                              | $10.82      | [digikey.ca](https://www.digikey.ca/en/products/detail/e-switch/PS1057ABLK/46305)                                                                                     |
| 22AWG Wire (25')                               | $7.24       | [digikey.ca](https://www.digikey.ca/en/products/detail/sparkfun-electronics/PRT-08866/6833926)                                                                        |
| TRRS jack, female (x3)                         | $12.65      | [digikey.ca](https://www.digikey.ca/en/products/detail/switchcraft-inc/35RASMT5CHNTRX/16569698)                                                                       |
| Jumper wire (x60)                              | $11.74      | [digikey.ca](https://www.digikey.ca/en/products/detail/sparkfun-electronics/PRT-12796/5993861)                                                                        |
| Soldering iron                                 | $59.87      | [homedepot.ca](https://www.homedepot.ca/product/1001649527)                                                                                                           |
| Solder                                         | $28.23      | [homedepot.ca](https://www.homedepot.ca/product/1001652943)                                                                                                           |
| Wire stripper                                  | $11.29      | [canadiantire.ca](https://www.canadiantire.ca/en/pdp/mastercraft-20-30-gauge-wire-stripper-comfort-grip-handles-high-carbon-heat-treated-steel-0584508p.html?loc=plp) |
| Acrylic base plate (x4)                        | $54.88      | [ponoko.com](https://www.ponoko.com/)                                                                                                                                 |
| Gel wood stain                                 | $19.93      | [homedepot.ca](https://www.homedepot.ca/product/1000844900)                                                                                                           |
| Glossy polyurethane                            | $27.11      | [amazon.ca](https://a.co/d/do2gUQm)                                                                                                                                   |
| Keycap set (x2)                                | $57.32      | [amazon.ca](https://www.amazon.ca/gp/product/B0B3QQ2468)                                                                                                              |
| Electrical tape                                | $5.37       | [amazon.ca](https://www.amazon.ca/dp/B001AXD0EY)                                                                                                                      |
| Rubber feet                                    | $13.55      | [amazon.ca](https://www.amazon.ca/gp/product/B08GLMTL77)                                                                                                              |
| **Only keyboard materials**                    | **$468.82** |                                                                                                                                                                       |
| **All items** (including tools, testers, etc.) | **$571.12** |                                                                                                                                                                       |

As you can see, building your own keyboard is _not_ a good way to save money&nbsp;ðŸ’¸

<br>

### Links/resources

- Helpful Hacker News comment: [https://news.ycombinator.com/item?id=23445208](https://news.ycombinator.com/item?id=23445208)
- Link to STLs
